/*!
 * Lifey. version 0.1.1
 * Copyright 2016 Benjamin Lord.
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),n(4),t.exports=n(5)},function(t,e,n){var i,o;(function(r,s){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.2
	 */
!function(r,s){"object"===a(e)&&"undefined"!=typeof t?t.exports=s():(i=s,o="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==o&&(t.exports=o)))}(void 0,function(){function t(t){return"function"==typeof t||"object"===("undefined"==typeof t?"undefined":a(t))&&null!==t}function e(t){return"function"==typeof t}function i(t){J=t}function o(t){K=t}function l(){return function(){return r.nextTick(f)}}function c(){return function(){Z(f)}}function u(){var t=0,e=new tt(f),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function d(){var t=new MessageChannel;return t.port1.onmessage=f,function(){return t.port2.postMessage(0)}}function h(){var t=setTimeout;return function(){return t(f,1)}}function f(){for(var t=0;t<G;t+=2){var e=it[t],n=it[t+1];e(n),it[t]=void 0,it[t+1]=void 0}G=0}function p(){try{var t=n(3);return Z=t.runOnLoop||t.runOnContext,c()}catch(e){return h()}}function v(t,e){var n=arguments,i=this,o=new this.constructor(g);void 0===o[rt]&&V(o);var r=i._state;return r?!function(){var t=n[r-1];K(function(){return A(r,o,t,i._result)})}():L(i,o,t,e),o}function m(t){var e=this;if(t&&"object"===("undefined"==typeof t?"undefined":a(t))&&t.constructor===e)return t;var n=new e(g);return z(n,t),n}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function w(t){try{return t.then}catch(e){return ct.error=e,ct}}function _(t,e,n,i){try{t.call(e,n,i)}catch(o){return o}}function E(t,e,n){K(function(t){var i=!1,o=_(n,e,function(n){i||(i=!0,e!==n?z(t,n):C(t,n))},function(e){i||(i=!0,P(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&o&&(i=!0,P(t,o))},t)}function x(t,e){e._state===at?C(t,e._result):e._state===lt?P(t,e._result):L(e,void 0,function(e){return z(t,e)},function(e){return P(t,e)})}function S(t,n,i){n.constructor===t.constructor&&i===v&&n.constructor.resolve===m?x(t,n):i===ct?P(t,ct.error):void 0===i?C(t,n):e(i)?E(t,n,i):C(t,n)}function z(e,n){e===n?P(e,y()):t(n)?S(e,n,w(n)):C(e,n)}function T(t){t._onerror&&t._onerror(t._result),D(t)}function C(t,e){t._state===st&&(t._result=e,t._state=at,0!==t._subscribers.length&&K(D,t))}function P(t,e){t._state===st&&(t._state=lt,t._result=e,K(T,t))}function L(t,e,n,i){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+at]=n,o[r+lt]=i,0===r&&t._state&&K(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,o=void 0,r=t._result,s=0;s<e.length;s+=3)i=e[s],o=e[s+n],i?A(n,i,o,r):o(r);t._subscribers.length=0}}function M(){this.error=null}function O(t,e){try{return t(e)}catch(n){return ut.error=n,ut}}function A(t,n,i,o){var r=e(i),s=void 0,a=void 0,l=void 0,c=void 0;if(r){if(s=O(i,o),s===ut?(c=!0,a=s.error,s=null):l=!0,n===s)return void P(n,b())}else s=o,l=!0;n._state!==st||(r&&l?z(n,s):c?P(n,a):t===at?C(n,s):t===lt&&P(n,s))}function I(t,e){try{e(function(e){z(t,e)},function(e){P(t,e)})}catch(n){P(t,n)}}function R(){return dt++}function V(t){t[rt]=dt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function k(t,e){this._instanceConstructor=t,this.promise=new t(g),this.promise[rt]||V(this.promise),W(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):P(this.promise,B())}function B(){return new Error("Array Methods must be provided an Array")}function F(t){return new k(this,t).promise}function X(t){var e=this;return new e(W(t)?function(n,i){for(var o=t.length,r=0;r<o;r++)e.resolve(t[r]).then(n,i)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function q(t){var e=this,n=new e(g);return P(n,t),n}function Y(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(t){this[rt]=R(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&Y(),this instanceof H?I(this,t):N())}function j(){var t=void 0;if("undefined"!=typeof s)t=s;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var i=null;try{i=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===i&&!n.cast)return}t.Promise=H}var U=void 0;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var W=U,G=0,Z=void 0,J=void 0,K=function(t,e){it[G]=t,it[G+1]=e,G+=2,2===G&&(J?J(f):ot())},$="undefined"!=typeof window?window:void 0,Q=$||{},tt=Q.MutationObserver||Q.WebKitMutationObserver,et="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,it=new Array(1e3),ot=void 0;ot=et?l():tt?u():nt?d():void 0===$?p():h();var rt=Math.random().toString(36).substring(16),st=void 0,at=1,lt=2,ct=new M,ut=new M,dt=0;return k.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===st&&n<t;n++)this._eachEntry(e[n],n)},k.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===m){var o=w(t);if(o===v&&t._state!==st)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===H){var r=new n(g);S(r,t,o),this._willSettleAt(r,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},k.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===st&&(this._remaining--,t===lt?P(i,n):this._result[e]=n),0===this._remaining&&C(i,this._result)},k.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,function(t){return n._settledAt(at,e,t)},function(t){return n._settledAt(lt,e,t)})},H.all=F,H.race=X,H.resolve=m,H.reject=q,H._setScheduler=i,H._setAsap=o,H._asap=K,H.prototype={constructor:H,then:v,"catch":function(t){return this.then(null,t)}},H.polyfill=j,H.Promise=H,H})}).call(e,n(2),function(){return this}())},function(t,e){"use strict";function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(d===clearTimeout)return clearTimeout(t);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function s(){v&&f&&(v=!1,f.length?p=f.concat(p):m=-1,p.length&&a())}function a(){if(!v){var t=o(s);v=!0;for(var e=p.length;e;){for(f=p,p=[];++m<e;)f&&f[m].run();m=-1,e=p.length}f=null,v=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,d,h=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(t){d=i}}();var f,p=[],v=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new l(t,e)),1!==p.length||v||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e){},function(t,e){"use strict";!function(t){function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader;return e.readAsArrayBuffer(t),s(e)}function l(t){var e=new FileReader;return e.readAsText(t),s(e)}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(d.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=u(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(o))}}),e}function f(t){var e=new o,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();e.append(i,o)}),e}function p(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof o?e.headers:new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};o.prototype.append=function(t,i){t=e(t),i=n(i);var o=this.map[t];o||(o=[],this.map[t]=o),o.push(i)},o.prototype["delete"]=function(t){delete this.map[e(t)]},o.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},o.prototype.getAll=function(t){return this.map[e(t)]||[]},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,i){this.map[e(t)]=[n(i)]},o.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){t.call(e,i,n,this)},this)},this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),i(t)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},c.call(d.prototype),c.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];p.redirect=function(t,e){if(g.indexOf(e)===-1)throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=d,t.Response=p,t.fetch=function(t,e){return new Promise(function(n,i){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=d.prototype.isPrototypeOf(t)&&!e?t:new d(t,e);var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:f(s),url:o()},e="response"in s?s.response:s.responseText;n(new p(e,t))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&v.blob&&(s.responseType="blob"),r.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0)},function(t,e,n){"use strict";var i=n(6),o=n(7),r=n(8),s=n(9),a=n(11),l=n(12),c=n(15),u=n(16),d=n(17),h=(n(14),n(18)),f=n(19),p=n(20),v=n(21);n(22);var m=n(10),g=window,y=document,b=y.documentElement,w=y.body,_=y.querySelector("#scroll-stylesheet").sheet,E=y.querySelector(".outer-background"),x=y.querySelector(".inner-background"),S=y.querySelector(".main-canvas"),z=S.getContext("2d"),T=y.querySelector(".splash"),C=y.querySelector(".navigator__canvas"),P=C.getContext("2d"),L=y.querySelector(".navigator__canvas-outline"),D=y.querySelector("[data-toolbox]"),M=y.querySelectorAll(".toolbox__button"),O=y.querySelector("[data-info-cursor-position-x]"),A=y.querySelector("[data-info-cursor-position-y]"),I=y.querySelector("[data-info-dimension-x]"),R=y.querySelector("[data-info-dimension-y]"),V=y.querySelector("[data-info-button='resize']"),k=y.querySelector(".player"),B=y.querySelector(".player__toroidal"),F=y.querySelector("[data-player-toroidal]"),X=y.querySelector("[data-player-speed]"),q=y.querySelector("[data-player-speed-input]"),Y=y.querySelector("[data-generations-counter]"),N=y.querySelector("[data-player-button='clear']"),H=y.querySelector("[data-player-button='reset']"),j=y.querySelector("[data-player-button='play']"),U=y.querySelector("[data-player-button='step']"),W=y.querySelector(".patterns"),G=y.querySelector(".patterns__outer-wrapper"),Z=y.querySelector("[data-pattern-button=open]"),J=y.querySelector("[data-pattern-button=save]"),K=y.querySelector("[data-pattern-button=share]"),$=y.querySelector(".patterns__outer-wrapper"),Q=y.querySelectorAll(".pat"),tt=y.querySelector(".meter__mobile-button"),et=y.querySelector(".menu__mobile-button"),nt=y.querySelector(".patterns__mobile-button"),it=y.querySelector(".mobile-menu__go-fullscreen"),ot=y.querySelector(".mobile-menu__exit-fullscreen"),rt=[y.querySelector("[data-toolbox]"),y.querySelector("[data-navigator]"),y.querySelector("[data-info]"),y.querySelector("[data-player]"),y.querySelector("[data-patterns]")];g.browser=g.browser||Object.create(null),g.browser.isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1,g.browser.isBlink=navigator.vendor&&"Google Inc."===navigator.vendor,g.browser.isMac=navigator.platform&&navigator.platform.toUpperCase().indexOf("MAC")>=0,g.browser.shortkey=browser.isMac?"⌘":"ctrl",g.browser.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;var st=Object.create(null);st.userIsDrawing=!1,st.pointerIsHoveringResizableEdge=!1,st.innerView=Object.create(null),st.innerView.dragPageStart=Object.create(null),st.innerView.dragScrollStart=Object.create(null),st.innerView.isDragging=!1,st.innerView.mouseIsDown=!1,st.innerView.scroll=Object.create(null),st.canvas=Object.create(null),st.canvas.overflowsInnerView=!1,st.canvas.domDim=Object.create(null),st.canvas.scale=6,st.toolbox=Object.create(null),st.toolbox.tool="brush",st.toolbox.selectedButton=y.querySelector(".toolbox__button"),st.nav=Object.create(null),st.nav.canvas=Object.create(null),st.nav.outline=Object.create(null),st.nav.outline.posX=0,st.nav.outline.posY=0,st.nav.outline.percentageX=1,st.nav.outline.percentageY=1,st.player=Object.create(null),st.player.isPlaying=!1,st.player.toroidal=!1,st.player.generation=0,st.player.delay=500,st.patterns=Object.create(null),st.scrollbarDim=0;for(var at=void 0,lt=0;lt<4;lt+=1){var ct=rt[lt];Object.create(i).initFlingable(ct,{flingCoast:!1,flingContainer:w,flingHandleEl:ct.querySelector("[data-flingable-handle]")})}var ut=Object.create(r.extend(Object.create(i),o));ut.rzblAbortResize=function(){return st.canvas.isDrawing||st.isModalOpen},ut.reportResizing=function(t){st.panelIsResizing=t},ut.initFlingable(rt[4],{flingCoast:!1,flingContainer:w,flingHandleEl:rt[4].querySelector("[data-flingable-handle]")}).initResizable(rt[4],{rzblTop:!1,rzblHorizontalCssProp:"right"}),Gator(w).on(["mousedown"],".panel",function(t){"player__speed-input"!==t.target.className&&t.preventDefault()});var dt={getVisibleDimensions:function(){st.innerView.visibleWidth=E.clientWidth,st.innerView.visibleHeight=E.clientHeight},onResize:function(){dt.getVisibleDimensions(),ht.evaluateOverflow()},onScroll:function(){st.innerView.isDragging||(st.innerView.scroll.x=st.innerView.dragScrollStart.x=this.scrollLeft,st.innerView.scroll.y=st.innerView.dragScrollStart.y=this.scrollTop,yt(!1))},setScrollPosition:function(t,e){st.canvas.overflowsInnerView&&(t=Math.max(0,t),e=Math.max(0,e),E.scrollLeft=st.innerView.scroll.x=t,E.scrollTop=st.innerView.scroll.y=e)},onPointerDown:function(t){!st.canvas.overflowsInnerView||browser.isBig&&!m.shift&&"hand"!==st.toolbox.tool||!browser.isBig&&"zoom-in"!==st.toolbox.tool||(st.innerView.dragPageStart.x=t.pageX,st.innerView.dragPageStart.y=t.pageY,st.innerView.dragScrollStart.x=st.innerView.scroll.x,st.innerView.dragScrollStart.y=st.innerView.scroll.y,st.innerView.isDragging=!0,w.addEventListener("mousemove",dt.onDragMove),w.addEventListener("mouseleave",dt.onDragEnd),w.addEventListener("mouseup",dt.onDragEnd))},onDragMove:function(t){var e=t.pageX,n=t.pageY,i=e-st.innerView.dragPageStart.x,o=n-st.innerView.dragPageStart.y;E.scrollLeft=st.innerView.dragScrollStart.x-i,E.scrollTop=st.innerView.dragScrollStart.y-o,st.innerView.scroll.x=E.scrollLeft,st.innerView.scroll.y=E.scrollTop,browser.isBig&&g.setTimeout(function(){yt(!1)},0)},onDragEnd:function(t){st.innerView.isDragging=!1,w.removeEventListener("mousemove",dt.onDragMove),w.removeEventListener("mouseleave",dt.onDragEnd),w.removeEventListener("mouseup",dt.onDragEnd),st.innerView.scroll.x=E.scrollLeft,st.innerView.scroll.y=E.scrollTop}},ht=Object.create(null);ht.setCanvasDim=function(t,e){st.canvas.domDim.x=S.width=t,st.canvas.domDim.y=S.height=e,z.imageSmoothingEnabled=!1,z.fillStyle="rgba(0,0,0,1)",P.fillStyle="rgba(0,0,0,1)",ht.clearMainAndNavCanvases(),ht.setNavigatorCanvasDimensions(),I.textContent=t,R.textContent=e,st.canvas.imageData=z.getImageData(0,0,t,e),st.canvas.pixelBuffer=new Int32Array(st.canvas.imageData.data.buffer)},ht.setNavigatorCanvasDimensions=function(){var t=158,e=164,n=st.canvas.domDim.x,i=st.canvas.domDim.y,o=void 0,r=void 0,s=t/t,a=n/i;a>=s?(o=t,r=Math.round(t/a)):(o=Math.round(e*a),r=e),C.style.width=o+"px",C.style.height=r+"px",st.nav.canvas.width=o,st.nav.canvas.height=r,C.width=n,C.height=i,n<=t&&i<=e&&(P.imageSmoothingEnabled=!1)},ht.clearDataArray=function(){st.canvas.dataArray=new Int8Array(st.canvas.domDim.x*st.canvas.domDim.y)},ht.clearMainAndNavCanvases=function(){var t=st.canvas.domDim.x,e=st.canvas.domDim.y;z.clearRect(0,0,t,e),P.clearRect(0,0,t,e)};var ft=0,pt=0;ht.paintBothCanvasesBitwise=function(){for(var t=performance.now(),e=st.canvas.dataArray,n=e.length,i=(st.canvas.domDim.x,st.canvas.pixelBuffer),o=0;o<n;o+=1){var r=255-255*e[o];i[o]=255<<24|r<<16|r<<8|r}z.putImageData(st.canvas.imageData,0,0),P.putImageData(st.canvas.imageData,0,0);var s=performance.now();pt+=s-t,59===ft&&(console.log("Avg canvas.paintBothCanvasesBitwise: "+pt/60+" ms."),ft=0,pt=0),ft+=1},ht.draw=function(t){var e=st.canvas.domDim.x,n=st.canvas.domDim.y,i=st.canvas.scale,o=st.innerView.scroll.x,r=st.innerView.scroll.y,s=1,a=void 0,l=void 0,c=void 0,u=void 0,d=void 0,h=void 0,f=void 0,p=void 0;if("touchmove"===t.type&&t.preventDefault(),!m.shift){"eraser"===st.toolbox.tool&&(s=0,z.fillStyle="rgba(255,255,255,1)",P.fillStyle="rgba(255,255,255,1)");for(var v=t.targetTouches&&t.targetTouches.length||1,g=[],y=0;y<v;y+=1)"touchstart"===t.type||"touchmove"===t.type?(a=t.touches[y].pageX,l=t.touches[y].pageY,c=t.touches[y].target.offsetLeft,u=t.touches[y].target.offsetTop):(a=t.pageX,l=t.pageY,c=t.target.offsetLeft,u=t.target.offsetTop),d=c-(e*i-e)/2,h=u-(n*i-n)/2,f=(a-d)/i,p=(l-h)/i,o&&(f+=o/i),r&&(p+=r/i),g[y]={x:Math.floor(f-st.innerView.marginLeft/i),y:Math.floor(p)};for(var b=0;b<v;b+=1){var w=g[b].x,_=g[b].y;z.fillRect(w,_,1,1),P.fillRect(w,_,1,1),st.canvas.dataArray[_*st.canvas.domDim.x+w]=s}}},ht.onPointerDown=function(t){"brush"!==st.toolbox.tool&&"eraser"!==st.toolbox.tool||st.toolbox.override||st.panelIsResizing||st.isHoveringResizableEdge||st.isModalOpen||3===t.which||("touchstart"===t.type&&t.preventDefault(),st.innerView.marginLeft=parseInt(g.getComputedStyle(x).marginLeft,10),Dt(),Rt(),ht.draw(t),st.canvas.isDrawing=!0,"touchstart"===t.type?(S.addEventListener("touchmove",ht.draw),g.addEventListener("touchend",ht.onPointerUp)):(S.addEventListener("mousemove",ht.draw),g.addEventListener("mouseup",ht.onPointerUp)))},ht.onPointerUp=function(t){st.canvas.isDrawing=!1,"eraser"===st.toolbox.tool&&(z.fillStyle="rgba(0,0,0,1)",P.fillStyle="rgba(0,0,0,1)"),"touchend"===t.type?(t.preventDefault(),S.removeEventListener("touchmove",ht.draw),g.removeEventListener("touchend",ht.onPointerUp)):(S.removeEventListener("mousemove",ht.draw),g.removeEventListener("mouseup",ht.onPointerUp))},ht.handleResize=function(t,e,n,i){for(var o=st.canvas.domDim.x,r=st.canvas.domDim.y,s=st.canvas.dataArray,a=new Int8Array(t*e),l=Object.create(null,{left:{value:0},center:{value:Math.round(Math.max(o-t,0)/2)},right:{value:Math.max(o-t,0)},top:{value:0},middle:{value:Math.round(Math.max(r-e,0)/2)},bottom:{value:Math.max(r-e,0)}}),c=l[n],u=l[i],d=c+Math.min(o,t),h=u+Math.min(r,e),f=Object.create(null,{left:{value:0},center:{value:Math.round(Math.max(t-o,0)/2)},right:{value:Math.max(t-o,0)},top:{value:0},middle:{value:Math.round(Math.max(e-r,0)/2)},bottom:{value:Math.max(e-r,0)}}),p=f[n],v=f[i],m=u;m<h;m+=1)for(var g=c;g<d;g+=1)a[(m-u+v)*t+(g-c+p)]=s[m*o+g];st.canvas.dataArray=a,Ot(a,t,e)},S.addEventListener("touchstart",ht.onPointerDown),S.addEventListener("mousedown",ht.onPointerDown),ht.repaintBoxShadow=function(){S.classList.remove("main-canvas--box-shadow"),g.getComputedStyle(S),g.setTimeout(function(){S.classList.add("main-canvas--box-shadow")},90)},ht.handleIncrementalZoom=function(t,e){if(("zoom-in"===st.toolbox.tool||"zoom-out"===st.toolbox.tool||e)&&!st.toolbox.override&&browser.isBig){var n=st.canvas.scale,i=n,o={overflowed:st.canvas.overflowsInnerView,x:st.innerView.scroll.x,y:st.innerView.scroll.y,scale:n},r=[.333,.5,.667,1,2,3,4,5,6,7,8,12,16,32,64],s=st.toolbox.tool;if(e&&(s=e),"zoom-in"===s){for(var a=0;a<15;a+=1)if(r[a]>n){i=r[a];break}}else for(var l=14;l>-1;l-=1)if(r[l]<n){i=r[l];break}i!==n&&(S.setAttribute("style","transform: scale("+i+")"),st.canvas.scale=i,browser.isBlink&&ht.repaintBoxShadow(),ht.evaluateOverflow(i),st.canvas.overflowsInnerView&&ht.setScrollPositionBasedOnZoomEvent(t,o,e))}},ht.evaluateOverflow=function(t){var e=st.canvas.domDim.x,n=st.canvas.domDim.y,i=st.canvas.scale,o=!1,r=void 0,s=void 0,a=!1;void 0!==t&&(i=t),e*i<st.innerView.visibleWidth&&n*i<st.innerView.visibleHeight?st.canvas.overflowsInnerView&&(st.innerView.width=dt.visibleWidth,st.innerView.height=dt.visibleHeight,st.innerView.scroll.x=void 0,st.innerView.scroll.y=void 0,x.classList.remove("inner-background--canvas-overflows"),x.style.width="",x.style.height="",a=!0):(o=!0,r=e*i+2*st.canvas.zoomPadding,s=n*i+2*st.canvas.zoomPadding,st.innerView.width=r,st.innerView.height=s,x.style.width=r+"px",x.style.height=s+"px",st.canvas.overflowsInnerView||x.classList.add("inner-background--canvas-overflows")),st.canvas.overflowsInnerView=o,yt(a)},ht.setScrollPositionBasedOnZoomEvent=function(t,e,n,i,o,r,s){var a=st.canvas.domDim.x,l=st.canvas.domDim.y,c=st.canvas.zoomPadding,u=e.scale,d=st.canvas.scale;r=r||0,s=s||0;var h=t&&t.pageX||i,f=t&&t.pageY||o,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,_=void 0;e.overflowed?(p=h+e.x-c,v=f+e.y-c):(m=(st.innerView.visibleWidth-a*u)/2,g=(st.innerView.visibleHeight-l*u)/2,p=h-m,v=f-g),y=p/u,b=v/u,w=c+y*d-h,_=c+b*d-f,w-=r,_-=s,dt.setScrollPosition(w,_)},ht.handleFitZoom=function(){var t=st.canvas.domDim.x,e=st.canvas.domDim.y,n=st.innerView.visibleWidth,i=st.innerView.visibleHeight,o=void 0,r=n/i,s=t/e;o=r>=s?i/e:n/t,st.canvas.overflowsInnerView&&(x.classList.remove("inner-background--canvas-overflows"),x.removeAttribute("style")),S.setAttribute("style","transform: scale("+o+")"),st.canvas.overflowsInnerView=!1,st.innerView.scroll.x=void 0,st.innerView.scroll.y=void 0,L.removeAttribute("style"),st.nav.outline.posX=0,st.nav.outline.posY=0,st.nav.outline.percentageX=1,st.nav.outline.percentageY=1,st.canvas.scale=o,browser.isBlink&&ht.repaintBoxShadow()},x.addEventListener("click",ht.handleIncrementalZoom);var vt=new v.Manager(x,{touchAction:"pan-x pan-y"});vt.add(new v.Pinch);var mt=Object.create(null);vt.on("pinchstart",function(t){t.preventDefault(),"zoom-in"===st.toolbox.tool&&(mt.overflowed=st.canvas.overflowsInnerView,mt.x=st.innerView.scroll.x,mt.y=st.innerView.scroll.y,mt.scale=st.canvas.scale,mt.center=t.center,S.classList.remove("main-canvas--transition-scale"))}),vt.on("pinch",function(t){if(t.preventDefault(),"zoom-in"===st.toolbox.tool){var e=mt.scale*t.scale;S.style.transform="scale("+e+")",st.canvas.scale=e;var n=mt.center,i=t.center;ht.evaluateOverflow(e);var o=i.x-n.x,r=i.y-n.y;ht.setScrollPositionBasedOnZoomEvent(null,mt,null,n.x,n.y,o,r)}}),vt.on("pinchend",function(t){t.preventDefault(),"zoom-in"===st.toolbox.tool&&browser.isBlink&&ht.repaintBoxShadow()});var gt=function(t,e){if(e=e||this.getAttribute("data-tool-button"),e!==st.toolbox.tool){for(var n=0;n<5;n+=1)M[n].classList.remove("panel__button--selected");var i=y.querySelector("[data-tool-button="+e);i.classList.add("panel__button--selected"),x.classList.remove("brush-tool","eraser-tool","hand-tool","zoom-in-tool","zoom-out-tool"),x.classList.add(e+"-tool"),st.toolbox.tool=e}};Gator(D).on(["touchstart","mousedown"],".toolbox__button",gt);var yt=function(t){if(browser.isBig){if(t)return void L.removeAttribute("style");if(st.canvas.overflowsInnerView){var e=st.innerView.visibleWidth,n=st.innerView.visibleHeight,i=st.canvas.zoomPadding,o=st.canvas.scale,r=void 0,s=void 0,a=void 0,l=void 0,c=void 0;st.innerView.scroll.x<i?e-=i-st.innerView.scroll.x:st.innerView.scroll.x>st.innerView.width-st.innerView.visibleWidth-i&&(e-=st.innerView.scroll.x-(st.innerView.width-st.innerView.visibleWidth-i)),st.innerView.scroll.y<i?n-=i-st.innerView.scroll.y:st.innerView.scroll.y>st.innerView.height-st.innerView.visibleHeight-i&&(n-=st.innerView.scroll.y-(st.innerView.height-st.innerView.visibleHeight-i)),r=e/(st.canvas.domDim.x*o),s=n/(st.canvas.domDim.y*o),r!==st.nav.outline.percentageX&&(st.nav.outline.percentageX=r,L.style.width=100*r+"%"),s!==st.nav.outline.percentageY&&(st.nav.outline.percentageY=s,L.style.height=100*s+"%"),a=st.nav.canvas.width>st.nav.canvas.height?st.nav.canvas.width/(st.canvas.domDim.x*o):st.nav.canvas.height/(st.canvas.domDim.y*o),l=(st.innerView.scroll.x-i)*a,c=(st.innerView.scroll.y-i)*a,l=Math.max(0,l),c=Math.max(0,c),st.nav.outline.posX=l,st.nav.outline.posy=c,L.style.transform="translate("+l+"px,"+c+"px)"}}},bt=function(t){O.textContent=Math.floor(t.offsetX),A.textContent=Math.floor(t.offsetY)},wt=function(t){bt(t),S.addEventListener("mousemove",bt),S.addEventListener("mouseleave",_t)},_t=function Ht(t){O.textContent="",A.textContent="",S.removeEventListener("mousemove",bt),S.removeEventListener("mouseleave",Ht)},Et=Object.create(null);Et.setSpeed=function(t,e){var n=t&&t.target?t.target.value:e;n=Math.max(0,Math.min(6,n)),st.player.delay=[1600,750,200,100,50,25,"none"][n],t||(q.value=n),q.setAttribute("data-player-speed-input",n)};for(var xt=new Uint8Array(512),St=0;St<512;St+=1)xt[St]=St.toString(2).split("1").length-1;var zt=0,Tt=function(t,e,n,i){return i[e*n+t]},Ct=function(t,e,n,i,o){var r=0,s=0===t,a=t===n-1,l=0===e,c=e===i-1,u=!1,d=void 0;return s?zt=0:(zt<<=3,zt=511&zt,u=16===(16&zt)),a||l||!Tt(t+1,e-1,n,o)||(zt=1|zt),!a&&Tt(t+1,e,n,o)&&(zt=2|zt),a||c||!Tt(t+1,e+1,n,o)||(zt=4|zt),s&&(!l&&Tt(t,e-1,n,o)&&(zt=8|zt),Tt(t,e,n,o)&&(zt=16|zt,u=!0),!c&&Tt(t,e+1,n,o)&&(zt=32|zt)),d=xt[zt],(3===d||u&&4===d)&&(r=1),r},Pt=function(t,e,n,i,o){var r=0,s=0===t,a=t===n-1,l=0===e,c=e===i-1,u=!1,d=void 0;s?zt=0:(zt<<=3,zt=511&zt,u=16===(16&zt));var h=t-1,f=t+1,p=e-1,v=e+1;return s?h=n-1:a&&(f=0),l?p=i-1:c&&(v=0),Tt(f,p,n,o)&&(zt=1|zt),Tt(f,e,n,o)&&(zt=2|zt),Tt(f,v,n,o)&&(zt=4|zt),s&&(Tt(t,p,n,o)&&(zt=8|zt),Tt(t,e,n,o)&&(zt=16|zt,u=!0),Tt(t,v,n,o)&&(zt=32|zt),Tt(h,p,n,o)&&(zt=64|zt),Tt(h,e,n,o)&&(zt=128|zt),Tt(h,v,n,o)&&(zt=256|zt)),d=xt[zt],(3===d||u&&4===d)&&(r=1),r},Lt=Ct;Et.setToroidal=function(t){t.target.checked?(st.player.toroidal=!0,Lt=Pt):(st.player.toroidal=!1,Lt=Ct)},Et.renderNextGeneration=function(){for(var t=st.canvas.domDim.x,e=st.canvas.domDim.y,n=st.canvas.dataArray,i=new Int8Array(t*e),o=st.canvas.pixelBuffer,r=0;r<e;r+=1)for(var s=0;s<t;s+=1){var a=Lt(s,r,t,e,n);i[r*t+s]=a;var l=255-255*a;o[r*t+s]=255<<24|l<<16|l<<8|l}z.putImageData(st.canvas.imageData,0,0),P.putImageData(st.canvas.imageData,0,0),st.canvas.dataArray=i,Y.textContent=st.player.generation=st.player.generation+=1,st.player.isPlaying&&(at="none"===st.player.delay?requestAnimationFrame(Et.renderNextGeneration):g.setTimeout(function(){requestAnimationFrame(Et.renderNextGeneration)},st.player.delay))},Et.pause=function(){st.player.isPlaying&&("none"===st.player.delay?cancelAnimationFrame(at):g.clearTimeout(at)),st.player.isPlaying=!1,j.classList.remove("player__play-button--is-playing")},Et.onPlayerClearButton=function(t){Et.onResetGenerationsCounter(t),Dt(),ht.clearDataArray(),ht.clearMainAndNavCanvases()},Et.onResetGenerationsCounter=function(t){t&&"touchstart"===t.type&&t.preventDefault(),Et.pause(),Y.textContent="0",st.player.generation=0},Et.onStepButton=function(t){t&&"touchstart"===t.type&&t.preventDefault(),st.player.isPlaying&&Et.pause(),Dt(),Rt(),Et.renderNextGeneration()},Et.play=function(){
st.player.isPlaying=!0,j.classList.add("player__play-button--is-playing"),Dt(),Rt(),Et.renderNextGeneration()},Et.onPlayStopButton=function(t){t&&"touchstart"===t.type&&t.preventDefault(),st.player.isPlaying?Et.pause():Et.play()},F.addEventListener("change",Et.setToroidal),q.addEventListener("input",Et.setSpeed),N.addEventListener("touchstart",Et.onPlayerClearButton),N.addEventListener("mousedown",Et.onPlayerClearButton),H.addEventListener("touchstart",Et.onResetGenerationsCounter),H.addEventListener("mousedown",Et.onResetGenerationsCounter),j.addEventListener("touchstart",Et.onPlayStopButton),j.addEventListener("mousedown",Et.onPlayStopButton),U.addEventListener("touchstart",Et.onStepButton),U.addEventListener("mousedown",Et.onStepButton);var Dt=function(){var t=st.patterns.currentSelectedLink;t&&(t.parentNode.classList.remove("pat--selected","pat--loading"),st.patterns.currentSelectedLink=null)},Mt=function(t,e,n,i,o,s,a){var l=g.browser.isBig?200:80,c=i||Math.max(3*e,l),u=o||Math.max(3*n,l),d=new Int8Array(c*u),h=e*n,f=void 0,p=void 0;r.isNonNegativeInteger(s)||(s=Math.floor((c-e)/2)),r.isNonNegativeInteger(a)||(a=Math.floor((u-n)/2));for(var v=0;v<h;v+=1)f=v%e,p=Math.floor(v/e),d[(p+a)*c+f+s]=t[v];return{dataArray:d,width:c,height:u}},Ot=function(t,e,n){S.classList.remove("main-canvas--transition-scale"),ht.setCanvasDim(e,n),st.canvas.dataArray=t,ht.paintBothCanvasesBitwise(),g.requestAnimationFrame(function(){ht.handleFitZoom(),S.classList.add("main-canvas--transition-scale")})},At=function(t,e){var n=t.pattern,i=t.width,o=t.height,r=t.minCanvasX,s=t.minCanvasY,a=t.offsetX,l=t.offsetY,c=!!t.toroidal;n||console.log("Pattern file parse error");var u=d(n,i,o),h=void 0;e&&(h=Mt(u,i,o,r,s,a,l),u=h.dataArray,i=h.width,o=h.height),Ot(u,i,o),Et.onResetGenerationsCounter(),F.checked=c,st.player.toroidal=c,Lt=c?Pt:Ct},It=function(t){t.preventDefault(),Ft();var e=this.parentNode;Et.pause(),ht.clearMainAndNavCanvases(),Dt();for(var n=0;n<Q.length;n+=1)Q[n].classList.remove("pat--loading");e.classList.add("pat--selected","pat--loading"),st.patterns.currentSelectedLink=this,fetch(this.href).then(function(t){if(t.ok)return t;var e=new Error(t.statusText);throw e.response=t,e}).then(function(t){if(t.url!==st.patterns.currentSelectedLink.href)return Promise.reject("Pattern loaded was not the most recently clicked");var e=t.url.split("/").pop();return".json"===e.slice(-5)?(e=e.slice(0,-5),g.history.replaceState(void 0,void 0,"#"+e),t.json()):Promise.reject("Response didn't have a '.json' extension")}).then(function(t){At(t,!0)})["catch"](function(t){console.log("error:",t)}).then(function(){e.classList.remove("pat--loading")})};Gator($).on("click",".pat__link",It),s.modalSetOpenState=function(t){st.isModalOpen=t},a.modalBeforeOpen=function(){this.currentCanvasWidth=st.canvas.domDim.x,this.currentCanvasHeight=st.canvas.domDim.y},a.modalSubmit=function(){ht.handleResize(this.newWidth,this.newHeight,this.resizeIconPositionX,this.resizeIconPositionY)},a.init(V),l.modalSubmit=function(){var t=this.fileExtension,e=this.parsedPattern;"JSON"===t||"RLE"===t?At(e,!1):"BMP"===t&&Ot(e.pixels,e.width,e.height),Dt(),Rt(),Et.onResetGenerationsCounter(),g.history.replaceState(void 0,void 0,g.location.pathname)},l.init(Z),c.modalSubmit=function(){var t=y.querySelector("[data-modal-save-file-format]"),e=y.querySelector("[data-modal-save-pattern-name]"),n=y.querySelector("[data-modal-save-pattern-author]"),i=e.value,o=i||"my-lifey-pattern",r=t.value,s=void 0,a=Object.create(null),l=f(st.canvas.dataArray,st.canvas.domDim.x,st.canvas.domDim.y);i&&(a.name=i),n.value&&(a.author=n.value),a.width=l.width,a.height=l.height,a.minCanvasX=l.minCanvasX,a.minCanvasY=l.minCanvasY,a.offsetX=l.offsetX,a.offsetY=l.offsetY,a.pattern=l.pattern,"json"===r?s=JSON.stringify(a,null,"\t"):"rle"===r&&(s=h(a)),p(s,o+"."+r)},c.init(J),u.modalInternalBinding=function(){var t=y.querySelector(".pattern-fits-in-url"),e=y.querySelector("[data-modal-shareable-url]"),n=st.canvas.domDim.x,i=st.canvas.domDim.y,o=g.location.href,s=f(st.canvas.dataArray,n,i),a=void 0,l=void 0;l=st.patterns.currentSelectedLink?o:o+"#"+r.serializeToQueryString(s),!l||l.length>4e3?(a="Sorry, but your pattern is too large to be shared in a URL. Please consider saving to a JSON or RLE text file instead. You can also right-click directly on the canvas to save it as a PNG.",e.classList.add("hide-url")):(a="The following URL is a permanent, shareable link to the current pattern. It has been copied to your system clipboard.",e.innerHTML=l,e.focus(),r.copyTextToClipBoard(l)),t.innerHTML=a},u.init(K),m.setScope("main"),m.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("SELECT"==e||"TEXTAREA"==e)},w.addEventListener("keydown",function(t){if(t.repeat)return!1}),m("shift","main",function(){w.classList.add("shift-depressed"),st.toolbox.override="hand"}),w.addEventListener("keyup",function(t){16===t.which&&(w.classList.remove("shift-depressed"),st.toolbox.override=null)}),m("b","main",function(){gt("brush")}),m("e","main",function(){gt("eraser")}),m("h","main",function(){gt("hand")}),m("z","main",function(){gt("zoom-in")}),m(browser.shortkey+"+=","main",function(t){t.preventDefault(),t.pageX=st.innerView.visibleWidth/2,t.pageY=st.innerView.visibleHeight/2,ht.handleIncrementalZoom(t,"zoom-in")}),m(browser.shortkey+"+-","main",function(t){t.preventDefault(),t.pageX=st.innerView.visibleWidth/2,t.pageY=st.innerView.visibleHeight/2,ht.handleIncrementalZoom(t,"zoom-out")}),m(browser.shortkey+"+0","main",function(t){t.preventDefault(),ht.handleFitZoom()}),m("space","main",function(){Et.onPlayStopButton()}),m("tab","main",function(){return w.classList.toggle("hide-panels"),!1}),m("enter","modal",function(t){y.querySelector("[data-modal-ok]").click()});var Rt=function(){g.location.hash&&g.history.replaceState(void 0,void 0,g.location.pathname)};it.addEventListener("click",function(t){var e=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullScreen;e.call(b)}),ot.addEventListener("click",function(t){var e=y.exitFullscreen||y.mozCancelFullScreen||y.webkitExitFullscreen;e.call(y)});var Vt=y.querySelector(".mobile-menu__refresh");Vt.addEventListener("click",function(t){t.preventDefault(),g.location="https://bellandwhistle.net/lifey"});var kt=function(t){"touchstart"===t.type&&(t.preventDefault(),this.classList.add("panel__button--touch-pressed")),Ft(t,this)},Bt=function(t){t.preventDefault(),this.classList.remove("panel__button--touch-pressed")},Ft=function(){var t=void 0,e={meter:{buttonEl:tt,targetEl:k,className:"player--mobile-show-speed"},menu:{buttonEl:et,targetEl:k,className:"player--mobile-show-toroidal"},patterns:{buttonEl:nt,targetEl:W,className:"patterns--mobile-show"}};return function(n,i){var o=void 0;if(i&&(o=i.getAttribute("data-mobile-button")),t){var r=e[t];if(r.buttonEl.classList.remove("panel__button--selected"),r.targetEl.classList.remove(r.className),o&&o===t)return void(t=void 0);t=void 0}if(i){var s=e[o];if(!s)return;s.buttonEl.classList.add("panel__button--selected"),s.targetEl.classList.add(s.className),t=o}}}();Gator(w).on(["touchstart","click"],".panel__button",kt),Gator(B).on("click",".mobile-menu__item",Ft),Gator(w).on("touchend",".panel__button",Bt),Gator(X).on("touchstart","svg",function(t){var e=this.classList.contains("player__tortoise")?-1:1;Et.setSpeed(null,parseInt(q.value,10)+e)});var Xt=function(){var t=y.createElement("div"),e=y.createElement("div"),n=y.createElement("div"),i=y.createElement("div"),o=y.createElement("div"),r=void 0,s=void 0,a=void 0;t.classList.add("ff-scroll","ff-scroll--horizontal","ff-scroll--invert"),e.classList.add("ff-scroll","ff-scroll--horizontal","ff-scroll--lighter"),n.classList.add("ff-scroll","ff-scroll--vertical","ff-scroll--invert"),i.classList.add("ff-scroll","ff-scroll--vertical","ff-scroll--lighter"),o.classList.add("ff-scroll","ff-scroll-corner"),r=n.cloneNode(),r.classList.add("ff-scroll--full-height"),s=i.cloneNode(),s.classList.add("ff-scroll--full-height"),t.classList.add("ff-scroll--horizontal-with-corner"),e.classList.add("ff-scroll--horizontal-with-corner"),n.classList.add("ff-scroll--vertical-with-corner"),i.classList.add("ff-scroll--vertical-with-corner"),a=y.createElement("div"),a.classList.add("ff-scroll","ff-scroll--vertical","ff-scroll--full-height","ff-scroll--single-line"),w.insertBefore(t,D),w.insertBefore(e,D),w.insertBefore(n,D),w.insertBefore(i,D),w.insertBefore(o,D),G.appendChild(r),G.appendChild(s),G.appendChild(a)};g.browser.isFirefox&&Xt();var qt=function(){for(var t=_.cssRules.length,e=0;e<t;e+=1)_.deleteRule(0);_.insertRule(".panel--right { right: "+st.scrollbarDim+"px;}",0),g.browser.isFirefox&&(_.insertRule(".ff-scroll--horizontal {height: "+st.scrollbarDim+"px;",1),_.insertRule(".ff-scroll--vertical  {width: "+st.scrollbarDim+"px;",2),_.insertRule(".ff-scroll--horizontal-with-corner {width: calc(100% - "+st.scrollbarDim+"px);}",3),_.insertRule(".ff-scroll--vertical-with-corner {height: calc(100% - "+st.scrollbarDim+"px);}",4),_.insertRule(".ff-scroll-corner { width: "+st.scrollbarDim+"px;height: "+st.scrollbarDim+"px);}",5))},Yt=function(){g.browser.isBig=!1,st.canvas.zoomPadding=100,g.matchMedia("(min-width: 790px) and (min-height: 600px)").matches&&(st.canvas.zoomPadding=200,g.browser.isBig=!0,S.addEventListener("mouseenter",wt)),st.scrollbarDim=E.offsetWidth-E.clientWidth},Nt=function(){Yt(),g.browser.isFirefox&&qt(),dt.onResize()};!function(){var t=void 0,e=function(){var t=void 0,e=void 0;g.browser.isBig?(t=Math.floor(.8*st.innerView.visibleWidth/st.canvas.scale),e=Math.floor(.8*st.innerView.visibleHeight/st.canvas.scale)):(t=Math.floor((st.innerView.visibleWidth-30)/st.canvas.scale),e=Math.floor((st.innerView.visibleHeight-30)/st.canvas.scale)),ht.setCanvasDim(t,e),ht.clearDataArray()},n=function(){var t=g.location.hash.slice(1),n=y.querySelector("[href='pat/"+t+".json']"),i=r.deserializeQueryString(t);if(L.classList.remove("navigator__canvas-outline--hidden"),i&&i.pattern&&i.width&&i.height)try{At(i,!0)}catch(o){console.log("Error parsing query string: ",o),e()}else n?n.click():e();g.addEventListener("resize",r.debounce(Nt,80)),E.addEventListener("scroll",r.throttleRaf(dt.onScroll)),x.addEventListener("mousedown",dt.onPointerDown)},i=function s(e){e&&e.preventDefault(),clearTimeout(t),T.removeEventListener("touchstart",s),T.removeEventListener("click",s),T.parentNode.removeChild(T),n()},o=function a(){Et.setSpeed(void 0,q.value),Yt(),qt(),dt.getVisibleDimensions(),st.innerView.width=st.innerView.visibleWidth,st.innerView.height=st.innerView.visibleHeight,ut.recordComputedStyle(),browser.cutsMustard&&(g.location.hash?i():(t=g.setTimeout(i,2500),T.addEventListener("touchstart",i),T.addEventListener("click",i))),g.removeEventListener("load",a)};"complete"===y.readyState?o():g.addEventListener("load",o)}()},function(t,e,n){var i;i=function(){return{initFlingable:function(t,e){this.element=t,this.background=document.querySelector(".outer-background"),this.flingCoast=!1,e&&(this.flingCoast=!!e.coast,e.flingFriction&&(this.flingFriction=e.flingFriction),e.flingHandleEl&&(this.flingHandleEl=e.flingHandleEl),e.flingContainer&&(this.flingContainer=Object.create(null),this.flingContainer.element=e.flingContainer,this.flingContainer.css=Object.create(null))),this.css||(this.css=Object.create(null)),this.isFlingDragging=!1,this.isFlingMoving=!1,this.flingDragPositionX=0,this.flingDragPositionY=0,this.flingPositionX=0,this.flingPositionY=0,this.flingVelocityX=0,this.flingVelocityY=0,this.flingAccelX=0,this.flingAccelY=0,this.flingMouseDown=this.flingMouseDown.bind(this),this.flingMouseMove=this.flingMouseMove.bind(this),this.flingMouseUp=this.flingMouseUp.bind(this);var n=this.element;return this.flingHandleEl&&(n=this.flingHandleEl),n.addEventListener("mousedown",this.flingMouseDown),this},transformProp:function(t){var e,n=t.getComputedStyle(document.documentElement),i=["webkit","ms"];if("transform"in n)return"transform";for(var o=0;o<2;o+=1)if(e=i[o]+"Transform",e in n)return"-"+i[o]+"-transform"}(window),flingMouseDown:function(t){t.preventDefault(),this.rzblHoveringEdge||(this.element.classList.add("panel--is-flinging"),this.background.classList.add("panel--is-flinging"),this.measureContainers(),this.flingPageStartX=t.pageX,this.flingPageStartY=t.pageY,this.flingItemBeginX=this.flingDragPositionX=this.flingPositionX,this.flingItemBeginY=this.flingDragPositionY=this.flingPositionY,this.isFlingDragging=this.isFlingMoving=!0,this.flingAnimate(),window.addEventListener("mousemove",this.flingMouseMove),window.addEventListener("mouseup",this.flingMouseUp))},flingMouseMove:function(t){var e=t.pageX-this.flingPageStartX,n=t.pageY-this.flingPageStartY;this.flingDragPositionX=this.flingItemBeginX+e,this.flingDragPositionY=this.flingItemBeginY+n},flingMouseUp:function(){this.isFlingDragging=!1,this.flingCoast||(this.isFlingMoving=!1,this.flingVelocityX=this.flingVelocityY=0),this.element.classList.remove("panel--is-flinging"),this.background.classList.remove("panel--is-flinging"),window.removeEventListener("mousemove",this.flingMouseMove),window.removeEventListener("mouseup",this.flingMouseUp)},flingAnimate:function(){var t=this;return this.isFlingMoving&&(this.isFlingDragging||this.flingCoast)?(this.applyDragForce(),this.flingContainer&&(this.flingPositionX=this.containFling("x",this.flingPositionX),this.flingPositionY=this.containFling("y",this.flingPositionY)),this.renderFling(),void requestAnimationFrame(function(){t.flingAnimate()})):void(this.css.boundRect=this.element.getBoundingClientRect())},renderFling:function(){this.flingPositionX=Math.round(1e3*this.flingPositionX)/1e3,this.flingPositionY=Math.round(1e3*this.flingPositionY)/1e3;var t="translate("+this.flingPositionX+"px, "+this.flingPositionY+"px)";this.scale&&(t+=" scale("+this.scale+")"),this.element.style[this.transformProp]=t,this.css.translateX=this.flingPositionX,this.css.translateY=this.flingPositionY},flingFriction:.93,applyDragForce:function(){if(this.isFlingDragging){var t=this.flingDragPositionX-this.flingPositionX,e=t-this.flingVelocityX,n=this.flingDragPositionY-this.flingPositionY,i=n-this.flingVelocityY;this.flingAccelX+=e,this.flingAccelY+=i}this.flingVelocityX+=this.flingAccelX,this.flingVelocityX*=this.flingFriction,this.flingPositionX+=this.flingVelocityX,this.flingVelocityY+=this.flingAccelY,this.flingVelocityY*=this.flingFriction,this.flingPositionY+=this.flingVelocityY,Math.abs(this.flingVelocityX)<.001&&Math.abs(this.flingVelocityY)<.001&&!this.isFlingDragging&&(this.isFlingMoving=!1),this.flingAccelX=0,this.flingAccelY=0},measureContainers:function(){this.css.boundRect=this.element.getBoundingClientRect(),this.css.offsetTop=this.element.offsetTop,this.css.offsetLeft=this.element.offsetLeft,this.flingContainer&&this.flingContainer.element&&(this.flingContainer.css.boundRect=this.flingContainer.element.getBoundingClientRect())},containFling:function(t,e){var n="x"===t?"width":"height",i="x"===t?"Left":"Top",o=-1*this.css["offset"+i],r=this.flingContainer.css.boundRect[n]-this.css.boundRect[n]+o;return Math.min(r,Math.max(o,e))}}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i,o;i=[n(8)],o=function(t){return{initResizable:function(e,n){var i=this;if(this.element=e,n)for(var o in n)n.hasOwnProperty(o)&&(this[o]=n[o]);this.css||(this.css=Object.create(null)),this.isResizing=!1,this.rzblOnTopEdge=!1,this.rzblOnRightEdge=!1,this.rzblOnBottomEdge=!1,this.rzblOnLeftEdge=!1,this.rzblDragStartX=0,this.rzblDragStartY=0,this.rzblCalcEdges=this.rzblCalcEdges.bind(this),this.recordComputedStyle=this.recordComputedStyle.bind(this),this.rzblMouseDown=this.rzblMouseDown.bind(this),this.rzblMouseMove=this.rzblMouseMove.bind(this),this.rzblMouseUp=this.rzblMouseUp.bind(this);var r=function s(){i.recordComputedStyle(),window.removeEventListener("load",s,!0)};return"complete"===document.readyState?r():window.addEventListener("load",r,!0),window.addEventListener("resize",t.debounce(this.recordComputedStyle,80),!0),window.addEventListener("mousemove",this.rzblMouseMove,!0),window.addEventListener("mousedown",this.rzblMouseDown,!0),this},recordComputedStyle:function(){var e=window.getComputedStyle(this.element);this.css.boundRect=this.element.getBoundingClientRect(),this.css.top=t.stripPixelUnits(e.top),this.css.right=t.stripPixelUnits(e.right),this.css.bottom=t.stripPixelUnits(e.bottom),this.css.left=t.stripPixelUnits(e.left)},rzblTop:!0,rzblRight:!0,rzblBottom:!0,rzblLeft:!0,rzblHorizontalCssProp:"left",rzblVerticalCssProp:"top",rzblMinHeight:100,rzblMinWidth:100,rzblTolerance:4,rzblCalcEdges:function(t){if(this.css.boundRect){var e=this.css.boundRect.top,n=this.css.boundRect.right,i=this.css.boundRect.bottom,o=this.css.boundRect.left,r=t.clientX,s=t.clientY,a=this.rzblTolerance,l=!1,c=o<=r&&r<=n,u=e<=s&&s<=i,d=Math.abs(s-e)<=a,h=Math.abs(r-n)<=a,f=Math.abs(s-i)<=a,p=Math.abs(r-o)<=a;return d&&c&&this.rzblTop?l="top":h&&u&&this.rzblRight?l="right":f&&c&&this.rzblBottom?l="bottom":p&&u&&this.rzblLeft&&(l="left"),"function"==typeof this.rzblIsHovering&&this.rzblIsHovering(l),l&&t.stopPropagation(),l}},rzblApplyCursorClass:function(){var t=document.body,e=document.querySelector(".outer-background"),n=this.element;"top"===this.rzblHoveredEdge||"bottom"===this.rzblHoveredEdge?"ns"!==this.cursor&&(this.cursor="ns",t.classList.add("ns-resize-cursor"),e.classList.add("ns-resize-cursor"),n.classList.add("ns-resize-cursor")):"right"===this.rzblHoveredEdge||"left"===this.rzblHoveredEdge?"ew"!==this.cursor&&(this.cursor="ew",t.classList.add("ew-resize-cursor"),e.classList.add("ew-resize-cursor"),n.classList.add("ew-resize-cursor")):this.isResizing||this.cursor&&(this.cursor="",t.classList.remove("ns-resize-cursor","ew-resize-cursor"),e.classList.remove("ns-resize-cursor","ew-resize-cursor"),n.classList.remove("ns-resize-cursor","ew-resize-cursor"))},rzblMouseDown:function(t){var e=!1;this.rzblAbortResize&&(e=this.rzblAbortResize()),this.rzblHoveredEdge&&!e&&(t.stopPropagation(),this.rzblEdgeClicked=this.rzblHoveredEdge,this.isResizing=!0,this.reportResizing&&this.reportResizing(!0),this.recordComputedStyle(),this.rzblDragStartX=t.clientX,this.rzblDragStartY=t.clientY,this.rzblMoveX=0,this.rzblMoveY=0,this.flingItemBeginX=this.css[this.rzblHorizontalCssProp],this.flingItemBeginY=this.css[this.rzblVerticalCssProp],this.rzblAnimate(),window.addEventListener("mouseup",this.rzblMouseUp,!0))},rzblMouseMove:function(t){var e=this.rzblHoveredEdge,n=this.rzblCalcEdges(t);if(this.isResizing)"top"===this.rzblEdgeClicked||"bottom"===this.rzblEdgeClicked?this.rzblMoveY=t.pageY-this.rzblDragStartY:"right"!==this.rzblEdgeClicked&&"left"!==this.rzblEdgeClicked||(this.rzblMoveX=t.pageX-this.rzblDragStartX);else{if(this.rzblHoveredEdge=n,this.rzblAbortResize&&this.rzblAbortResize())return;n!==e&&this.rzblApplyCursorClass()}},rzblMouseUp:function(t){this.isResizing=!1,this.reportResizing&&this.reportResizing(!1),this.rzblEdgeClicked=void 0,window.removeEventListener("mouseup",this.rzblMouseUp,!0)},rzblAnimate:function(){var t=this;return this.isResizing?(this.rzblRender(),void requestAnimationFrame(function(){t.rzblAnimate()})):void(this.css.boundRect=this.element.getBoundingClientRect())},rzblRender:function(){"left"===this.rzblEdgeClicked?("left"===this.rzblHorizontalCssProp&&(this.css.left=this.flingItemBeginX+this.rzblMoveX,this.element.style.left=this.css.left+"px"),this.element.style.width=this.css.boundRect.width-this.rzblMoveX+"px"):"right"===this.rzblEdgeClicked?("right"===this.rzblHorizontalCssProp&&(this.css.right=this.flingItemBeginX-this.rzblMoveX,this.element.style.right=this.css.right+"px"),this.element.style.width=this.css.boundRect.width+this.rzblMoveX+"px"):"top"===this.rzblEdgeClicked?("top"===this.rzblVerticalCssProp&&(this.css.top=this.flingItemBeginY+this.rzblMoveY,this.element.style.top=this.css.top+"px"),this.element.style.height=this.css.boundRect.height-this.rzblMoveY+"px"):"bottom"===this.rzblEdgeClicked&&("bottom"===this.rzblVerticalCssProp&&(this.css.bottom=this.css.bottom-this.rzblMoveY,this.element.style.bottom=this.css.bottom+"px"),this.element.style.height=this.css.boundRect.height+this.rzblMoveY+"px")}}}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i;i=function(){"use strict";return{round:function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)},debounce:function(t,e){var n=void 0,i=void 0,o=void 0,r=void 0;return function(){o=this,i=[].slice.call(arguments,0),r=new Date;var s=function a(){var s=new Date-r;s<e?n=setTimeout(a,e-s):(n=null,t.apply(o,i))};n||(n=setTimeout(s,e))}},throttleRaf:function(t){var e=void 0,n=void 0,i=void 0;return function(){n=this,e=[].slice.call(arguments,0);var o=function(){t.apply(n,e),i=!1};i||(requestAnimationFrame(o),i=!0)}},getClosest:function(t,e){for(var n=e.charAt(0);t&&t!==document;t=t.parentNode){if("."===n&&t.classList.contains(e.substr(1)))return t;if("#"===n&&t.id===e.substr(1))return t;if("["===n&&t.hasAttribute(e.substr(1,e.length-2)))return t;if(t.tagName.toLowerCase()===e)return t}return!1},extend:function(){for(var t=1;t<arguments.length;t+=1)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]},isDigit:function(t){return Boolean([!0,!0,!0,!0,!0,!0,!0,!0,!0,!0][t])},isNonNegativeInteger:function(t){return Number.isFinite(t)&&t%1===0&&t>=0},stripPixelUnits:function(t){var e=t.replace(/px$/i,"");return this.isDigit(t[0])&&(e=parseFloat(e)),e},serializeToQueryString:function(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e&&(e=e.slice(0,-1)),e},deserializeQueryString:function(t){var e=Object.create(null);t.indexOf("?")>-1&&(t=t.split("?")[1]);var n=t.split("&");return n.forEach(function(t){t=t.split("="),e[t[0]]=decodeURIComponent(t[1]||"")}),e},selectContents:function(t){try{t.focus(),t.setSelectionRange(0,9999)}catch(e){t.select()}return t},copyTextToClipBoard:function(t){var e=document.createElement("textarea");return document.body.appendChild(e),e.value=t,this.selectContents(e),document.execCommand("Copy"),document.body.removeChild(e),t}}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){var t=n(10);return{modalWrapperElement:document.querySelector(".modal-wrapper"),modalTitleEl:document.querySelector(".modal__title"),modalContentsEl:document.querySelector(".modal__contents"),init:function(t){this.modalOpenButtonElement=t,this.modalOpen=this.modalOpen.bind(this),this.modalClose=this.modalClose.bind(this),this.modalOnOk=this.modalOnOk.bind(this),this.modalOnCancel=this.modalOnCancel.bind(this),this.modalOpenButtonElement.addEventListener("touchstart",this.modalOpen),this.modalOpenButtonElement.addEventListener("click",this.modalOpen)},modalOpen:function(e){"touchstart"===e.type&&e.preventDefault(),"function"==typeof this.modalBeforeOpen&&this.modalBeforeOpen(),"function"==typeof this.modalSetOpenState&&this.modalSetOpenState(!0),t.setScope("modal"),this.modalWrapperElement.classList.remove("modal-wrapper--hide"),this.modalTitleEl.innerHTML=this.titleText,this.modalContentsEl.innerHTML=this.innerMarkup(),this.modalOkButton=document.querySelector("[data-modal-ok]"),this.modalCancelButton=document.querySelector("[data-modal-cancel]"),this.modalOkButton.addEventListener("touchstart",this.modalOnOk),this.modalOkButton.addEventListener("click",this.modalOnOk),this.modalCancelButton&&(this.modalCancelButton.addEventListener("touchstart",this.modalOnCancel),this.modalCancelButton.addEventListener("click",this.modalOnCancel)),this.modalInternalBinding&&this.modalInternalBinding()},showError:function(t){this.errorEl.innerHTML=t},modalOnOk:function(t){"touchstart"===t.type&&t.preventDefault(),("function"!=typeof this.modalValidate||this.modalValidate())&&("function"==typeof this.modalSubmit&&this.modalSubmit(),this.modalClose())},modalOnCancel:function(t){"touchstart"===t.type&&t.preventDefault(),this.modalClose()},modalClose:function(){this.modalInternalUnbinding&&this.modalInternalBinding(),this.modalOkButton.removeEventListener("touchstart",this.modalOnOk),this.modalOkButton.removeEventListener("click",this.modalOnOk),this.modalCancelButton&&(this.modalCancelButton.removeEventListener("touchstart",this.modalOnCancel),this.modalCancelButton.removeEventListener("click",this.modalOnCancel)),this.modalWrapperElement.classList.add("modal-wrapper--hide"),t.setScope("main"),"function"==typeof this.modalSetOpenState&&this.modalSetOpenState(!1),"function"==typeof this.modalAfterClose&&this.modalAfterClose()}}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){"use strict";!function(e){function n(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function o(t){for(w in E)E[w]=t[P[w]]}function r(t){var e,i,r,s,a,c;if(e=t.keyCode,n(C,e)==-1&&C.push(e),93!=e&&224!=e||(e=91),e in E){E[e]=!0;for(r in S)S[r]==e&&(l[r]=!0);if(!(e in _))return}if(o(t),l.filter.call(this,t)&&e in _)for(c=p(),s=0;s<_[e].length;s++)if(i=_[e][s],i.scope==c||"all"==i.scope){a=i.mods.length>0;for(r in E)(!E[r]&&n(i.mods,+r)>-1||E[r]&&n(i.mods,+r)==-1)&&(a=!1);(0!==i.mods.length||E[16]||E[18]||E[17]||E[91])&&!a||i.method(t,i)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function s(t){var e,i=t.keyCode,o=n(C,i);if(o>=0&&C.splice(o,1),93!=i&&224!=i||(i=91),i in E){E[i]=!1;for(e in S)S[e]==i&&(l[e]=!1)}}function a(){for(w in E)E[w]=!1;for(w in S)l[w]=!1}function l(t,e,n){var i,o;i=m(t),void 0===n&&(n=e,e="all");for(var r=0;r<i.length;r++)o=[],t=i[r].split("+"),t in S?(t=S[t],o=[t]):(t.length>1&&(o=g(t),t=[t[t.length-1]]),t=t[0],t=T(t)),t in _||(_[t]=[]),_[t].push({shortcut:i[r],scope:e,method:n,key:i[r],mods:o})}function c(t,e){var n,o,r,s,a,l=[];for(n=m(t),s=0;s<n.length;s++){if(o=n[s].split("+"),t in S?(t=S[t],l=[t]):(o.length>1&&(l=g(o)),t=o[o.length-1],t=T(t)),void 0===e&&(e=p()),!_[t])return;for(r=0;r<_[t].length;r++)a=_[t][r],a.scope===e&&i(a.mods,l)&&(_[t][r]={})}}function u(t){return"string"==typeof t&&(t=T(t)),n(C,t)!=-1}function d(){return C.slice(0)}function h(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)}function f(t){x=t||"all"}function p(){return x||"all"}function v(t){var e,n,i;for(e in _)for(n=_[e],i=0;i<n.length;)n[i].scope===t?n.splice(i,1):i++}function m(t){var e;return t=t.replace(/\s/g,""),e=t.split(","),""===e[e.length-1]&&(e[e.length-2]+=","),e}function g(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=S[e[n]];return e}function y(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}function b(){var t=e.key;return e.key=L,t}var w,_={},E={16:!1,18:!1,17:!1,91:!1},x="all",S={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},z={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},T=function(t){return z[t]||t.toUpperCase().charCodeAt(0)},C=[];for(w=1;w<20;w++)z["f"+w]=111+w;var P={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(w in S)l[w]=!1;y(document,"keydown",function(t){r(t)}),y(document,"keyup",s),y(window,"focus",a);var L,D=l;D.setScope=f,D.getScope=p,D.deleteScope=v,D.filter=h,D.isPressed=u,D.getPressedKeyCodes=d,D.noConflict=b,D.unbind=c,e&&(e.key&&(L=e.key),e.key=D),t.exports=D}(void 0)},function(t,e,n){var i,o;i=[n(9)],o=function(t){var e=Object.create(t);return e.titleText="Canvas Size",e.innerMarkup=function(){return'<div class="modal__configure">\n\t\t\t<div class="modal__section">\n\t\t\t\t<div class="modal__section-title">Current Size</div>\n\t\t\t\t<div class="modal__prop modal__prop--text-only">\n\t\t\t\t\t<span class="modal__prop-name modal__prop-name--text-only">Width:</span>\n\t\t\t\t</div\n\t\t\t\t><div class="modal__value modal__value--text-only">\n\t\t\t\t\t<span class="modal__value-name modal__value-name--text-only"\n\t\t\t\t\t\tdata-modal-canvas-size-current-width >\n\t\t\t\t\t\t'+this.currentCanvasWidth+'</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal__prop modal__prop--text-only">\n\t\t\t\t\t<span class="modal__prop-name modal__prop-name--text-only">Height:</span>\n\t\t\t\t</div\n\t\t\t\t><div class="modal__value modal__value--text-only">\n\t\t\t\t\t<span class="modal__value-name modal__value-name--text-only"\n\t\t\t\t\t\tdata-modal-canvas-size-current-height\n\t\t\t\t\t\t\t>'+this.currentCanvasHeight+'</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="modal__section">\n\t\t\t\t<div class="modal__section-title">New Size</div>\n\t\t\t\t<div class="modal__prop">\n\t\t\t\t\t<span class="modal__prop-name">Width:</span>\n\t\t\t\t</div\n\t\t\t\t><div class="modal__value">\n\t\t\t\t\t<input id="canvas-size-width" class="modal__numeric-input" type=number min="0"\n\t\t\t\t\t\tstep="1" required value='+this.currentCanvasWidth+'\n\t\t\t\t\t\tdata-modal-canvas-size-new-width>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal__prop">\n\t\t\t\t\t<span class=modal__prop-name>Height:</span>\n\t\t\t\t</div\n\t\t\t\t><div class="modal__value">\n\t\t\t\t\t<input class="modal__numeric-input" type="number" min="0" step="1" required\n\t\t\t\t\t\tvalue='+this.currentCanvasHeight+'  data-modal-canvas-size-new-height>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal__prop">\n\t\t\t\t\t<span class=modal__prop-name>Anchor:</span>\n\t\t\t\t</div\n\t\t\t\t><div class="modal__value modal__canvas-direction-button-container"\n\t\t\t\t\tdata-canvas-direction-container>\n\t\t\t\t\t<svg class="modal__canvas-resize-arrows" xmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\tviewBox="0 0 68 68" >\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="4,4 4,13.15 7.87,9.3 15.66,16.95 17.14,15.54 9.41,\n\t\t\t\t\t\t\t\t7.71 13.05,4"/>\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="40,8 34,2 28,8 33,8 33,19 35,19 35,8"/>\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="64,4 55,4 58.85,7.85 51.2,15.62 52.61,17.1 60.37,9.37 64,13"/>\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="8,27.5 2,33.5 8,39.5 8,35 19,35 19,33 8,33"/>\n\t\t\t\t\t\t<circle id="circle_4_" fill="#231F20" cx="34" cy="34" r="3"/>\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="60,39.5 66,33.5 60,27.5 60,33 49,33 49,35 60,35"/>\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="4,64 13.2,64 9.35,60.2 17,52.45 15.59,50.99 7.73,58.72 4,55.1"/>\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="28,60 34,66 40,60 35,60 35,49 33,49 33,60"/>\n\t\t\t\t\t\t<polygon fill="#231F20"\n\t\t\t\t\t\t\tpoints="64,64 64,54.95 60.22,58.8 52.49,51.15 51.03,52.56 58.77,\n\t\t\t\t\t\t\t60.34 55.15,64"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="left   top"    ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="center top"    ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="right  top"    ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="left   middle" ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="center middle" ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="right  middle" ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="left   bottom" ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="center bottom" ></button\n\t\t\t\t\t><button type=button class="modal__canvas-direction-button" tabindex=-1\n\t\t\t\t\t\tdata-canvas-resize-direction="right  bottom" ></button\n\t\t\t\t></div\n\t\t\t></div\n\t\t></div\n\t\t><div class=modal__confirm>\n\t\t\t<button type=button class="modal__button modal-ok" data-modal-ok>OK</button>\n\t\t\t<button type=button class="modal__button modal-cancel" data-modal-cancel>Cancel</button>\n\t\t</div>\n\t\t<div class="modal__error-text"></div>';
},e.modalInternalBinding=function(){var t=document;this.resizeIconPositionX="center",this.resizeIconPositionY="middle",this.onResizeDirectionButtonClick=this.onResizeDirectionButtonClick.bind(this),this.resizeDirectionContainer=t.querySelector("[data-canvas-direction-container]"),this.resizeDirectionContainer.addEventListener("click",this.onResizeDirectionButtonClick);var e=t.getElementById("canvas-size-width");try{e.focus(),e.setSelectionRange(0,9999)}catch(n){e.select()}},e.modalInternalUnbinding=function(){var t=this;this.resizeDirectionContainer.removeEventListener("click",t.onResizeDirectionButtonClick)},e.modalValidate=function(){var t=document.querySelector("[data-modal-canvas-size-new-width]"),e=document.querySelector("[data-modal-canvas-size-new-height]"),n=parseInt(t.value),i=parseInt(e.value),o=void 0;return this.errorEl=document.querySelector(".modal__error-text"),"number"!=typeof n||"number"!=typeof i||Number.isNaN(n)||Number.isNaN(i)?o="Oops! Please enter a numeric input value.":n<3||i<3?o="Oops! Canvases must be at least three pixels or larger on each dimension.":(n>=5e3||i>=5e3)&&(o="Whoa Nellie! Please keep it under 5000 pixels on each dimension."),o?(this.showError(o),!1):(this.newWidth=n,this.newHeight=i,!0)},e.onResizeDirectionButtonClick=function(t){t.preventDefault(),t.stopImmediatePropagation();var e=t.target.getAttribute("data-canvas-resize-direction");e=e.split(/\s+/),this.resizeIconPositionX=e[0],this.resizeIconPositionY=e[1],this.resizeDirectionContainer.classList.remove("resize-icon-top","resize-icon-middle","resize-icon-bottom","resize-icon-left","resize-icon-center","resize-icon-right"),this.resizeDirectionContainer.classList.add("resize-icon-"+this.resizeIconPositionX),this.resizeDirectionContainer.classList.add("resize-icon-"+this.resizeIconPositionY)},e}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o;i=[n(9),n(13),n(14)],o=function(t,e,n){var i=Object.create(t);return i.titleText="Open Pattern",i.innerMarkup=function(){return"<div class='modal__open modal__configure'><div class='modal__open__instructions'>Choose a JSON, RLE, or 1-bit Windows BMP file pattern from your file system.</div></div><div class=modal__confirm><button type=button class='modal__button modal-ok' data-modal-ok>OK</button><button type=button class='modal__button modal-cancel' data-modal-cancel>Cancel</button></div><div class='modal__open__error-text modal__error-text'></div><div class=modal__input-file-wrapper><input class=modal__file-input type=file></div>"},i.modalInternalBinding=function(){var t=document.querySelector(".modal__file-input"),e=document.querySelector(".modal__error-text");this.modalValidateFileInputChoice=this.modalValidateFileInputChoice.bind(this),this.modalValidateFileInputContents=this.modalValidateFileInputContents.bind(this),this.fileInputEl=t,this.errorEl=e,this.fileInputEl.addEventListener("change",this.modalValidateFileInputChoice)},i.modalInternalUnbinding=function(){this.fileInputEl.removeEventListener("change",this.modalValidateFileInputChoice)},i.parsedPattern=null,i.isValid=!1,i.validateBMP=function(t){var e=n(t),i="";return e.iHeader.bitsPerPixel>1?i="The BMP file can't be read because it has a bit depth of greater than one.":e.iHeader.compressionMethod>0&&(i="Lifey currently only supports uncompressed BMP files."),i?this.parsedPattern=null:this.parsedPattern=e,i},i.readFile=function(t){var e=new FileReader,n=this,i=this.fileExtension;e.onload=function(t){n.modalValidateFileInputContents(t.target.result)},"JSON"===i||"RLE"===i?e.readAsText(t):"BMP"===i&&e.readAsArrayBuffer(t)},i.modalValidate=function(){return this.isValid},i.modalValidateFileInputContents=function(t){var n=this.fileExtension,i="";if("JSON"===n)try{this.parsedPattern=JSON.parse(t)}catch(o){i="The file text is not valid JSON. Please check the file for a possible syntax error."}else"RLE"===n?this.parsedPattern=e(t):"BMP"===n&&(i=this.validateBMP(t));this.showError(i),this.isValid=!i},i.modalValidateFileInputChoice=function(){var t=this.fileInputEl.files,e=t[0],n="",i=e.name,o=i.split(".").pop().toUpperCase();this.fileExtension=o,e&&0!==t.length?t.length>1?n="Multiple files selected. Please choose a single file.":"JSON"!==o&&"BMP"!==o&&"RLE"!==o&&(n="The file name should end with a dot, followed by either “json”, “rle”, or “bmp”."):n="No file selected.",n?this.parsedPattern=null:this.readFile(e),this.showError(n),this.isValid=!n},i}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i;i=function(){return function(t){var e=Object.create(null);if(t){var n=0,i=void 0,o=!1,r=void 0;e.name="",e.pattern="";for(var s=function(t){return" "===t||"\t"===t},a=function(t){return"\n"===t||"\f"===t||"\r"===t},l=function(t){return Boolean([!0,!0,!0,!0,!0,!0,!0,!0,!0,!0][t])},c=function(t){for(;s(t[t.length-1]);)t=t.substring(0,t.length-2);return t},u=function(t){e[t]||(e[t]="")};;){if(i=t[n],!i||"!"===i)return e;if("#"!==i){if(o)if(a(i))e[o]=c(e[o]),"coordinates"===o&&(e.coordinates=e.coordinates.split(" "),e.coordinates[0]=parseInt(e.coordinates[0],10),e.coordinates[1]=parseInt(e.coordinates[1],10)),o=!1;else if(s(i)&&""===e[o]);else{if("coordinates"===o&&!s(i)&&!l(i)&&"-"!==i){n+=1;continue}e[o]+=i}else"x"===i?(r="width",u("width")):"y"===i?(r="height",u("height")):"rule"===t.substring(n,n+4)?(r="rule",u("rule")):","===i||a(i)?(r="",e.width&&e.height&&(e.width=parseInt(e.width),e.height=parseInt(e.height))):r?l(i)?e[r]+=i:"rule"===r&&"/"===i&&(e[r]+="/"):(l(i)||"b"===i||"o"===i||"$"===i)&&(e.pattern+=i);n+=1}else"N"===t[n+1]||"n"===t[n+1]?o="name":"C"===t[n+1]||"c"===t[n+1]?(o="comments",u("comments")):"O"===t[n+1]||"o"===t[n+1]?(o="author",u("author")):"R"===t[n+1]&&(o="coordinates",u("coordinates")),n+=2}}}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){return function(t){var e=new DataView(t),n=Object.create(null);n.fHeader=Object.create(null),n.fHeader.offsetToPixArray=e.getUint32(10,!0),n.iHeader=Object.create(null),n.width=e.getUint32(18,!0),n.height=e.getUint32(22,!0),n.iHeader.bitsPerPixel=e.getUint16(28,!0),n.iHeader.compressionMethod=e.getUint32(30,!0),n.stride=4*Math.ceil(n.iHeader.bitsPerPixel*n.width/32),n.pixels=new Uint8Array(n.width*n.height);for(var i=n.fHeader.offsetToPixArray,o=void 0,r=void 0,s=void 0,a=void 0,l=void 0,c=0;c<n.height;c+=1){o=n.stride*c;for(var u=0;u<n.width;u+=1)r=Math.floor(u/8),s=u%8,a=e.getUint8(i+o+r,!0),a=a.toString(2),a=("00000000"+a).substring(a.length),l=a[s],n.pixels[(n.height-1-c)*n.width+u]=l}return n}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i,o;i=[n(9)],o=function(t){var e=Object.create(t);return e.titleText="Save As",e.innerMarkup=function(){return"<div class='modal__configure modal__configure--save-as'><div class='modal__save-pattern-option'>Format:</div><div class='modal__save-pattern-option-input-wrapper'><select class=modal__save-pattern-option-input name=fileformat data-modal-save-file-format><option value='json' selected>JavaScript Object Notation (.json)</option><option value='rle'>Run Length Encoded (.rle)</option></select></div><div class=modal__save-pattern-option>Pattern Name:</div><div class=modal__save-pattern-option-input-wrapper><input type=text class=modal__save-pattern-option-input data-modal-save-pattern-name></div><div class=modal__save-pattern-option>Author:</div><div class=modal__save-pattern-option-input-wrapper><input type=text class=modal__save-pattern-option-input data-modal-save-pattern-author></div><div class=modal__error-text></div></div><div class='modal__confirm modal__confirm--bottom-corner'><button type=button class='modal__button modal-cancel modal-cancel--save-as'data-modal-cancel>Cancel</button><button type=button class='modal__button modal-ok modal-ok--save-as'data-modal-ok >Save</button></div>"},e}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o;i=[n(9)],o=function(t){var e=Object.create(t);return e.titleText="Share Pattern",e.innerMarkup=function(){return"<div class='modal__configure modal__share__configure'><div class='modal__section-title--share'><span class=pattern-fits-in-url></span></div></div><div class=modal__confirm><button type=button class='modal__button modal-ok' data-modal-ok>OK</button></div><div class=modal__shareable-url data-modal-shareable-url></div"},e}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o;i=[n(8)],o=function(t){"use strict";return function(e,n,i){n=n||0,i=i||0;var o=void 0,r=0,s="",a=void 0,l=0,c=0,u=new Int8Array(n*i);if(e&&n&&i)for(;;){if(o=e[r],!o||"!"===o)return u;if(t.isDigit(o))s+=o;else if("b"===o||"o"===o){if(a=parseInt(s)||1,"o"===o)for(var d=0;d<a;d+=1)u[c*n+l+d]=1;l+=a,s=""}else"$"===o&&(a=parseInt(s)||1,l=0,c+=a,s="");r+=1}}}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i;i=function(){return function(t){var e="";return t.name&&(e+="#N "+t.name+"\n"),t.author&&(e+="#O "+t.author+"\n"),e+="x = "+t.width+", y="+t.height+", rule = B3/S23\n",e+=t.pattern+"!\n"}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i,o;i=[],o=function(){"use strict";function t(t,e,n,i,o,r,s){for(var a=new Int8Array(i*o),l=0;l<o;l+=1)for(var c=0;c<i;c+=1)a[l*i+c]=t[(l+s)*e+c+r];return a}function e(t,e){for(var n="",i=void 0,o=void 0,r=0,s=0,a=t.length,l=0;l<a;l+=1)if(i=t[l]?"o":"b",l>0&&(l+1)%e===0)"o"===i?(s&&(s>1&&(n+=s),n+="$",s=0),"o"===o?(r+=1,n+=r):"b"===o&&(r>1&&(n+=r),n+="b"),n+="o"):"b"===i&&"o"===o&&(r>1&&(n+=r),n+=o),l!==a-1&&(s+=1,o=void 0,r=0);else{if(i===o){r+=1;continue}"o"===i&&s&&(s>1&&(n+=s),n+="$",s=0),r>1&&(n+=r),o&&(n+=o),o=i,r=1}return n}return function(n,i,o){var r=n.length;if(r!==i*o)return console.log("dataArray doesn't match supplied canvas dimensions."),!1;for(var s=0;s<r&&1!==n[s];s+=1);for(var a=r-1;a>0&&1!==n[a];a-=1);for(var l=i-1,c=0;c<r;c+=1)1===n[c]&&c%i<l%i&&(l=c);for(var u=0,d=0;d<r;d+=1)1===n[d]&&d%i>u%i&&(u=d);var h=u%i-l%i+1,f=Math.floor(a/i)-Math.floor(s/i)+1,p=l%i,v=Math.floor(s/i),m=t(n,i,o,h,f,p,v),g=Object.create(null);return g.pattern=e(m,h),g.width=h,g.height=f,h<i&&(g.offsetX=p,g.minCanvasX=i),f<o&&(g.offsetY=v,g.minCanvasY=o),s===r&&(g.width=g.height=g.offsetX=g.offsetY=0),g}}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o;i=[n(8)],o=function(t){function e(t){t.target.removeEventListener("click",e),document.body.removeChild(t.target)}var n=void 0;return function(t,i){n&&window.URL.revokeObjectURL(n);var o=new Blob([t],{type:"text/plain"}),r=document.createElement("a");r.download=i,n=window.URL.createObjectURL(o),r.href=n,navigator&&navigator.vendor&&"Google Inc."===navigator.vendor||(r.addEventListener("click",e),r.style.display="none",document.body.appendChild(r)),r.click()}}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};/*! Hammer.JS - v2.0.7 - 2016-04-22
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */
!function(r,s,a,l){"use strict";function c(t,e,n){return setTimeout(p(t,n),e)}function u(t,e,n){return!!Array.isArray(t)&&(d(t,n[e],n),!0)}function d(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==l)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function h(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments)}}function f(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&mt(i,n)}function p(t,e){return function(){return t.apply(e,arguments)}}function v(t,e){return("undefined"==typeof t?"undefined":o(t))==bt?t.apply(e?e[0]||l:l,e):t}function m(t,e){return t===l?e:t}function g(t,e,n){d(_(e),function(e){t.addEventListener(e,n,!1)})}function y(t,e,n){d(_(e),function(e){t.removeEventListener(e,n,!1)})}function b(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function w(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function E(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function x(t){return Array.prototype.slice.call(t,0)}function S(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];E(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function z(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),r=0;r<gt.length;){if(n=gt[r],i=n?n+o:e,i in t)return i;r++}return l}function T(){return zt++}function C(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function P(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){v(t.options.enable,[t])&&n.handler(e)},this.init()}function L(t){var e,n=t.options.inputClass;return new(e=n?n:Pt?N:Lt?U:Ct?G:Y)(t,D)}function D(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&Rt&&i-o===0,s=e&(kt|Bt)&&i-o===0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,M(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function M(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=I(e)),o>1&&!n.firstMultiple?n.firstMultiple=I(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,l=e.center=R(i);e.timeStamp=Et(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=F(a,l),e.distance=B(a,l),O(n,e),e.offsetDirection=k(e.deltaX,e.deltaY);var c=V(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=_t(c.x)>_t(c.y)?c.x:c.y,e.scale=s?q(s.pointers,i):1,e.rotation=s?X(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,A(n,e);var u=t.element;b(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function O(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Rt&&r.eventType!==kt||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function A(t,e){var n,i,o,r,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(e.eventType!=Bt&&(a>It||s.velocity===l)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,d=V(a,c,u);i=d.x,o=d.y,n=_t(d.x)>_t(d.y)?d.x:d.y,r=k(c,u),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=r}function I(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:wt(t.pointers[n].clientX),clientY:wt(t.pointers[n].clientY)},n++;return{timeStamp:Et(),pointers:e,center:R(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R(t){var e=t.length;if(1===e)return{x:wt(t[0].clientX),y:wt(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:wt(n/e),y:wt(i/e)}}function V(t,e,n){return{x:e/t||0,y:n/t||0}}function k(t,e){return t===e?Ft:_t(t)>=_t(e)?t<0?Xt:qt:e<0?Yt:Nt}function B(t,e,n){n||(n=Wt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function F(t,e,n){n||(n=Wt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function X(t,e){return F(e[1],e[0],Gt)+F(t[1],t[0],Gt)}function q(t,e){return B(e[0],e[1],Gt)/B(t[0],t[1],Gt)}function Y(){this.evEl=Jt,this.evWin=Kt,this.pressed=!1,P.apply(this,arguments)}function N(){this.evEl=te,this.evWin=ee,P.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function H(){this.evTarget=ie,this.evWin=oe,this.started=!1,P.apply(this,arguments)}function j(t,e){var n=x(t.touches),i=x(t.changedTouches);return e&(kt|Bt)&&(n=S(n.concat(i),"identifier",!0)),[n,i]}function U(){this.evTarget=se,this.targetIds={},P.apply(this,arguments)}function W(t,e){var n=x(t.touches),i=this.targetIds;if(e&(Rt|Vt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=x(t.changedTouches),a=[],l=this.target;if(r=n.filter(function(t){return b(t.target,l)}),e===Rt)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(kt|Bt)&&delete i[s[o].identifier],o++;return a.length?[S(r.concat(a),"identifier",!0),a]:void 0}function G(){P.apply(this,arguments);var t=p(this.handler,this);this.touch=new U(this.manager,t),this.mouse=new Y(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Z(t,e){t&Rt?(this.primaryTouch=e.changedPointers[0].identifier,J.call(this,e)):t&(kt|Bt)&&J.call(this,e)}function J(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(o,ae)}}function K(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=le&&s<=le)return!0}return!1}function $(t,e){this.manager=t,this.set(e)}function Q(t){if(w(t,pe))return pe;var e=w(t,ve),n=w(t,me);return e&&n?pe:e||n?e?ve:me:w(t,fe)?fe:he}function tt(){if(!ue)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||r.CSS.supports("touch-action",n)}),t}function et(t){this.options=mt({},this.defaults,t||{}),this.id=T(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=ye,this.simultaneous={},this.requireFail=[]}function nt(t){return t&xe?"cancel":t&_e?"end":t&we?"move":t&be?"start":""}function it(t){return t==Nt?"down":t==Yt?"up":t==Xt?"left":t==qt?"right":""}function ot(t,e){var n=e.manager;return n?n.get(t):t}function rt(){et.apply(this,arguments)}function st(){rt.apply(this,arguments),this.pX=null,this.pY=null}function at(){rt.apply(this,arguments)}function lt(){et.apply(this,arguments),this._timer=null,this._input=null}function ct(){rt.apply(this,arguments)}function ut(){rt.apply(this,arguments)}function dt(){et.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=m(e.recognizers,ht.defaults.preset),new ft(t,e)}function ft(t,e){this.options=mt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=L(this),this.touchAction=new $(this,this.options.touchAction),pt(this,!0),d(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var n=t.element;if(n.style){var i;d(t.options.cssProps,function(o,r){i=z(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function vt(t,e){var n=s.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var mt,gt=["","webkit","Moz","MS","ms","o"],yt=s.createElement("div"),bt="function",wt=Math.round,_t=Math.abs,Et=Date.now;mt="function"!=typeof Object.assign?function(t){if(t===l||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==l&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var xt=h(function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===l)&&(t[i[o]]=e[i[o]]),o++;return t},"extend","Use `assign`."),St=h(function(t,e){return xt(t,e,!0)},"merge","Use `assign`."),zt=1,Tt=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in r,Pt=z(r,"PointerEvent")!==l,Lt=Ct&&Tt.test(navigator.userAgent),Dt="touch",Mt="pen",Ot="mouse",At="kinect",It=25,Rt=1,Vt=2,kt=4,Bt=8,Ft=1,Xt=2,qt=4,Yt=8,Nt=16,Ht=Xt|qt,jt=Yt|Nt,Ut=Ht|jt,Wt=["x","y"],Gt=["clientX","clientY"];P.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(C(this.element),this.evWin,this.domHandler)}};var Zt={mousedown:Rt,mousemove:Vt,mouseup:kt},Jt="mousedown",Kt="mousemove mouseup";f(Y,P,{handler:function(t){var e=Zt[t.type];e&Rt&&0===t.button&&(this.pressed=!0),e&Vt&&1!==t.which&&(e=kt),this.pressed&&(e&kt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Ot,srcEvent:t}))}});var $t={pointerdown:Rt,pointermove:Vt,pointerup:kt,pointercancel:Bt,pointerout:Bt},Qt={2:Dt,3:Mt,4:Ot,5:At},te="pointerdown",ee="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(te="MSPointerDown",ee="MSPointerMove MSPointerUp MSPointerCancel"),f(N,P,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=$t[i],r=Qt[t.pointerType]||t.pointerType,s=r==Dt,a=E(e,t.pointerId,"pointerId");o&Rt&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(kt|Bt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var ne={touchstart:Rt,touchmove:Vt,touchend:kt,touchcancel:Bt},ie="touchstart",oe="touchstart touchmove touchend touchcancel";f(H,P,{handler:function(t){var e=ne[t.type];if(e===Rt&&(this.started=!0),this.started){var n=j.call(this,t,e);e&(kt|Bt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Dt,srcEvent:t})}}});var re={touchstart:Rt,touchmove:Vt,touchend:kt,touchcancel:Bt},se="touchstart touchmove touchend touchcancel";f(U,P,{handler:function(t){var e=re[t.type],n=W.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Dt,srcEvent:t})}});var ae=2500,le=25;f(G,P,{handler:function(t,e,n){var i=n.pointerType==Dt,o=n.pointerType==Ot;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Z.call(this,e,n);else if(o&&K.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ce=z(yt.style,"touchAction"),ue=ce!==l,de="compute",he="auto",fe="manipulation",pe="none",ve="pan-x",me="pan-y",ge=tt();$.prototype={set:function(t){t==de&&(t=this.compute()),ue&&this.manager.element.style&&ge[t]&&(this.manager.element.style[ce]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return d(this.manager.recognizers,function(e){v(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=w(i,pe)&&!ge[pe],r=w(i,me)&&!ge[me],s=w(i,ve)&&!ge[ve];if(o){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}return s&&r?void 0:o||r&&n&Ht||s&&n&jt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ye=1,be=2,we=4,_e=8,Ee=_e,xe=16,Se=32;et.prototype={defaults:{},set:function(t){return mt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=ot(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)?this:(t=ot(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return t=ot(t,this),E(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=ot(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function Pe(t){function Pe(n){e.manager.emit(n,t)}var e=this,n=this.state;n<_e&&Pe(e.options.event+nt(n)),Pe(e.options.event),t.additionalEvent&&Pe(t.additionalEvent),n>=_e&&Pe(e.options.event+nt(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=Se)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Se|ye)))return!1;t++}return!0},recognize:function(t){var e=mt({},t);return v(this.options.enable,[this,e])?(this.state&(Ee|xe|Se)&&(this.state=ye),this.state=this.process(e),void(this.state&(be|we|_e|xe)&&this.tryEmit(e))):(this.reset(),void(this.state=Se))},process:function(t){},getTouchAction:function(){},reset:function(){}},f(rt,et,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(be|we),o=this.attrTest(t);return i&&(n&Bt||!o)?e|xe:i||o?n&kt?e|_e:e&be?e|we:be:Se}}),f(st,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ut},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ht&&e.push(me),t&jt&&e.push(ve),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&Ht?(o=0===r?Ft:r<0?Xt:qt,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?Ft:s<0?Yt:Nt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&be||!(this.state&be)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=it(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),f(at,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[pe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&be)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),f(lt,et,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[he]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(kt|Bt)&&!o)this.reset();else if(t.eventType&Rt)this.reset(),this._timer=c(function(){this.state=Ee,this.tryEmit()},e.time,this);else if(t.eventType&kt)return Ee;return Se},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ee&&(t&&t.eventType&kt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Et(),this.manager.emit(this.options.event,this._input)))}}),f(ct,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[pe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&be)}}),f(ut,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ht|jt,pointers:1},getTouchAction:function(){return st.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ht|jt)?e=t.overallVelocity:n&Ht?e=t.overallVelocityX:n&jt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&kt},emit:function(t){var e=it(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),f(dt,et,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[fe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Rt&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=kt)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||B(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t;var a=this.count%e.taps;if(0===a)return this.hasRequireFailures()?(this._timer=c(function(){this.state=Ee,this.tryEmit()},e.interval,this),be):Ee}return Se},failTimeout:function(){return this._timer=c(function(){this.state=Se},this.options.interval,this),Se},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ee&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:de,enable:!0,inputTarget:null,inputClass:null,preset:[[ct,{enable:!1}],[at,{enable:!1},["rotate"]],[ut,{direction:Ht}],[st,{direction:Ht},["swipe"]],[dt],[dt,{event:"doubletap",taps:2},["tap"]],[lt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ze=1,Te=2;ft.prototype={set:function(t){return mt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Te:ze},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&Ee)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],e.stopped===Te||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(be|we|_e)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof et)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=E(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==l&&e!==l){var n=this.handlers;return d(_(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==l){var n=this.handlers;return d(_(t),function(t){e?n[t]&&n[t].splice(E(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&vt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},mt(ht,{INPUT_START:Rt,INPUT_MOVE:Vt,INPUT_END:kt,INPUT_CANCEL:Bt,STATE_POSSIBLE:ye,STATE_BEGAN:be,STATE_CHANGED:we,STATE_ENDED:_e,STATE_RECOGNIZED:Ee,STATE_CANCELLED:xe,STATE_FAILED:Se,DIRECTION_NONE:Ft,DIRECTION_LEFT:Xt,DIRECTION_RIGHT:qt,DIRECTION_UP:Yt,DIRECTION_DOWN:Nt,DIRECTION_HORIZONTAL:Ht,DIRECTION_VERTICAL:jt,DIRECTION_ALL:Ut,Manager:ft,Input:P,TouchAction:$,TouchInput:U,MouseInput:Y,PointerEventInput:N,TouchMouseInput:G,SingleTouchInput:H,Recognizer:et,AttrRecognizer:rt,Tap:dt,Pan:st,Swipe:ut,Pinch:at,Rotate:ct,Press:lt,on:g,off:y,each:d,merge:St,extend:xt,assign:mt,inherit:f,bindFn:p,prefixed:z});var Ce="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};Ce.Hammer=ht,i=function(){return ht}.call(e,n,e,t),!(i!==l&&(t.exports=i))}(window,document,"Hammer")},function(t,e,n){var i,o;i=[n(8),n(23)],o=function(t,e){!function(){var n=!1,i=void 0,o=void 0,r=[];e(document.body).on("mouseover",".panel__button",function(t){if(!this.classList.contains("panel__button--show-tooltip")){var e=this,r=1e3;n&&(r=0),clearTimeout(i),clearTimeout(o),i=setTimeout(function(){s(e)},r),e.addEventListener("mouseleave",a)}});var s=function(e){n=!0,i=null;var o=t.getClosest(e,".panel");u(o),e.classList.add("panel__button--show-tooltip")},a=function d(){clearTimeout(i),this.classList.remove("panel__button--show-tooltip"),this.removeEventListener("mouseleave",d),o=setTimeout(function(){n=!1},200)},l=function(t){for(var e=0;e<r.length;e+=1)if(t===r[e])return e},c=function(){var t=void 0,e=r.length;if(e)for(var n=0;n<e;n+=1)if(t=r[n]){for(var i=0;i<e;i+=1)t.classList.remove("z-index"+(i+1));t.classList.add("z-index"+(n+1))}},u=function(t){if(t!==r[r.length-1]){var e=l(t);"number"==typeof e&&r.splice(e,1),r.push(t),c()}};e(document.body).on("mousedown",".panel",function(){u(this)})}()}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";!function(){function e(t,e,n){var i="blur"==e||"focus"==e;t.element.addEventListener(e,n,i)}function n(t){t.preventDefault(),t.stopPropagation()}function i(t){return u?u:u=t.matches?t.matches:t.webkitMatchesSelector?t.webkitMatchesSelector:t.mozMatchesSelector?t.mozMatchesSelector:t.msMatchesSelector?t.msMatchesSelector:t.oMatchesSelector?t.oMatchesSelector:c.matchesSelector}function o(t,e,n){if("_root"==e)return n;if(t!==n)return i(t).call(t,e)?t:t.parentNode?(d++,o(t.parentNode,e,n)):void 0}function r(t,e,n,i){f[t.id]||(f[t.id]={}),f[t.id][e]||(f[t.id][e]={}),f[t.id][e][n]||(f[t.id][e][n]=[]),f[t.id][e][n].push(i)}function s(t,e,n,i){if(f[t.id])if(e){if(!i&&!n)return void(f[t.id][e]={});if(!i)return void delete f[t.id][e][n];if(f[t.id][e][n])for(var o=0;o<f[t.id][e][n].length;o++)if(f[t.id][e][n][o]===i){f[t.id][e][n].splice(o,1);break}}else for(var r in f[t.id])f[t.id].hasOwnProperty(r)&&(f[t.id][r]={})}function a(t,e,n){if(f[t][n]){var i,r,s=e.target||e.srcElement,a={},l=0,u=0;d=0;for(i in f[t][n])f[t][n].hasOwnProperty(i)&&(r=o(s,i,p[t].element),r&&c.matchesEvent(n,p[t].element,r,"_root"==i,e)&&(d++,f[t][n][i].match=r,a[d]=f[t][n][i]));for(e.stopPropagation=function(){e.cancelBubble=!0},l=0;l<=d;l++)if(a[l])for(u=0;u<a[l].length;u++){if(a[l][u].call(a[l].match,e)===!1)return void c.cancel(e);if(e.cancelBubble)return}}}function l(t,e,n,i){function o(t){return function(e){a(u,e,t)}}if(this.element){t instanceof Array||(t=[t]),n||"function"!=typeof e||(n=e,e="_root");var l,u=this.id;for(l=0;l<t.length;l++)i?s(this,t[l],e,n):(f[u]&&f[u][t[l]]||c.addEvent(this,t[l],o(t[l])),r(this,t[l],e,n));return this}}function c(t,e){if(!(this instanceof c)){for(var n in p)if(p[n].element===t)return p[n];return h++,p[h]=new c(t,h),p[h]}this.element=t,this.id=e}var u,d=0,h=0,f={},p={};c.prototype.on=function(t,e,n){return l.call(this,t,e,n)},c.prototype.off=function(t,e,n){return l.call(this,t,e,n,!0)},c.matchesSelector=function(){},c.cancel=n,c.addEvent=e,c.matchesEvent=function(){return!0},"undefined"!=typeof t&&t.exports&&(t.exports=c),window.Gator=c}()}]);
//# sourceMappingURL=app.min.js.map